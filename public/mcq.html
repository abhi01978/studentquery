<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Generated MCQs</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans p-4">
  <h1 class="text-3xl font-bold text-center mb-6 text-blue-700">AI Generated MCQs</h1>

<div>
  <select id="board-select">
    <option value="CBSE">CBSE</option>
    <option value="UP Board">UP Board</option>
    <option value="ICSE">ICSE</option>
  </select>

  <select id="level-select">
    <option value="School">School</option>
    <option value="UG">UG</option>
    <option value="PG">PG</option>
  </select>

  <input type="text" id="topic-input" placeholder="Enter Topic / Subject" />
  <button onclick="loadMCQs()">Generate MCQs</button>
</div>

<div id="mcq-container" class="mt-4"></div>

<script>
async function loadMCQs() {
  const topic = document.getElementById("topic-input").value;
  const board = document.getElementById("board-select").value;
  const level = document.getElementById("level-select").value;
  
  const token = localStorage.getItem("token"); // ya sessionStorage me JWT token
  const res = await fetch(`/api/mcqs?topic=${topic}&board=${board}&level=${level}`, {
    headers: { "Authorization": `Bearer ${token}` }
  });
  const data = await res.json();

  const container = document.getElementById("mcq-container");
  container.innerHTML = "";
  
  if(data.mcqs.length === 0){
    container.innerHTML = "<p>No MCQs found. Try a different topic.</p>";
    return;
  }

  data.mcqs.forEach((q, idx) => {
    container.innerHTML += `
      <div class="p-4 mb-2 border rounded shadow">
        <p class="font-bold">${idx+1}. ${q.question}</p>
        <ul class="ml-4 list-disc">
          ${q.options.map(o => `<li>${o}</li>`).join('')}
        </ul>
      </div>
    `;
  });
}
</script>

</body>
</html>
