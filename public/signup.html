<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>StudentDM â€” Signup</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(180deg,#071029 0%, #0f172a 100%);
      color:#e6eef8;
      font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto;
    }
    .glass {
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      backdrop-filter: blur(6px);
      border: 1px solid rgba(255,255,255,0.04);
    }
    input::placeholder { color: rgba(230,238,248,0.45); }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

  <div class="w-full max-w-3xl">
    <div class="glass rounded-2xl p-6 md:p-10 shadow-lg">
      <div class="flex items-center justify-between mb-6">
        <div>
          <h1 class="text-2xl font-extrabold">Create your student account</h1>
          <p class="text-sm text-slate-300 mt-1">Tell us about yourself so we can personalise your experience.</p>
        </div>
        <div class="text-xs text-slate-300">
          Already have an account? 
          <a id="gotoLogin" class="text-indigo-300 underline cursor-pointer">Login</a>
        </div>
      </div>

      <form id="signupForm" class="grid grid-cols-1 md:grid-cols-2 gap-4" enctype="multipart/form-data">
        <!-- Left column -->
        <div class="space-y-3">
          <label class="text-xs text-slate-300">Full name *</label>
          <input name="name" id="name" required class="w-full rounded-lg px-3 py-2 bg-white/5 outline-none" placeholder="e.g., Rahul Kumar" />

          <label class="text-xs text-slate-300">Phone number *</label>
          <input name="phone" id="phone" required class="w-full rounded-lg px-3 py-2 bg-white/5 outline-none" placeholder="+91 98xxxxxxxx" />

          <label class="text-xs text-slate-300">Password *</label>
          <input name="password" id="password" type="password" required class="w-full rounded-lg px-3 py-2 bg-white/5 outline-none" placeholder="Choose a secure password" />

          <label class="text-xs text-slate-300">Profile image (optional)</label>
          <input name="profileImg" id="profileImg" type="file" accept="image/*" class="w-full rounded-lg bg-white/5 p-2" />
        </div>

        <!-- Right column -->
        <div class="space-y-3">
          <label class="text-xs text-slate-300">Student category *</label>
          <select name="category" id="category" required class="w-full rounded-lg px-3 py-2 bg-white/5 outline-none">
            <option value="School">School</option>
            <option value="UG">UG</option>
            <option value="PG">PG</option>
            <option value="Other">Other</option>
          </select>

          <label class="text-xs text-slate-300">Which board / university? *</label>
          <select name="board" id="board" required class="w-full rounded-lg px-3 py-2 bg-white/5 outline-none">
            <option>CBSE</option>
            <option>UP Board</option>
            <option>ICSE</option>
            <option>State Board</option>
            <option>Other</option>
          </select>

          <label class="text-xs text-slate-300">College / School name</label>
          <input name="college" id="college" class="w-full rounded-lg px-3 py-2 bg-white/5 outline-none" placeholder="Your college or school name" />

          <label class="text-xs text-slate-300">Course / Class</label>
          <input name="course" id="course" class="w-full rounded-lg px-3 py-2 bg-white/5 outline-none" placeholder="e.g., B.Tech CS / 12th" />
        </div>

        <!-- Full width rows -->
        <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-3">
          <div>
            <label class="text-xs text-slate-300">Semester / Year</label>
            <input name="semester" id="semester" class="w-full rounded-lg px-3 py-2 bg-white/5 outline-none" placeholder="e.g., Sem 2 / 2025" />
          </div>
          <div>
            <label class="text-xs text-slate-300">University</label>
            <input name="university" id="university" class="w-full rounded-lg px-3 py-2 bg-white/5 outline-none" placeholder="e.g., Delhi University" />
          </div>
          <div>
            <label class="text-xs text-slate-300">Dream / Career goal</label>
            <input name="dream" id="dream" class="w-full rounded-lg px-3 py-2 bg-white/5 outline-none" placeholder="e.g., Software Engineer at Google" />
          </div>
        </div>

        <div class="md:col-span-2 flex items-center justify-between mt-2">
          <div class="text-xs text-slate-400">By signing up you agree to our <span class="underline">terms</span>.</div>
          <div class="flex items-center gap-3">
            <button id="submitBtn" type="submit" class="px-5 py-2 rounded-lg bg-gradient-to-r from-indigo-500 to-teal-400 font-semibold">Create account</button>
          </div>
        </div>

        <div id="msg" class="md:col-span-2 text-sm text-center text-slate-300"></div>
      </form>
    </div>
  </div>

<script>
  // BASE_URL for Render & Localhost
  const BASE_URL = 
    location.hostname === 'studentquery.onrender.com'
      ? 'https://studentquery.onrender.com'
      : 'http://localhost:5000';

  document.getElementById('gotoLogin').addEventListener('click', () => {
    location.href = 'login.html';
  });

  const form = document.getElementById('signupForm');
  const msg = document.getElementById('msg');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    msg.textContent = '';

    const name = document.getElementById('name').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const password = document.getElementById('password').value;
    const board = document.getElementById('board').value;
    const category = document.getElementById('category').value;

    if (!name || !phone || !password || !board || !category) {
      msg.textContent = 'Please fill all required fields (*)';
      return;
    }
    if (password.length < 6) {
      msg.textContent = 'Password must be 6+ characters';
      return;
    }

    const formData = new FormData(form);

    const btn = document.getElementById('submitBtn');
    btn.disabled = true;
    btn.textContent = 'Signing up...';

    try {
      const res = await fetch(BASE_URL + '/api/auth/signup', {
        method: 'POST',
        body: formData
      });

      const data = await res.json();

      if (!res.ok) {
        msg.textContent =
          data.message ||
          (data.errors && data.errors.map(e => e.msg).join(', ')) ||
          'Signup failed';
        btn.disabled = false;
        btn.textContent = 'Create account';
        return;
      }

      if (data.token) localStorage.setItem('token', data.token);
      if (data.user) localStorage.setItem('user', JSON.stringify(data.user));

      msg.textContent = 'Signup successful! Redirecting...';
      setTimeout(() => (location.href = '/'), 900);

    } catch (err) {
      console.error(err);
      msg.textContent = 'Network error. Try again.';
    } finally {
      btn.disabled = false;
      btn.textContent = 'Create account';
    }
  });
</script>

</body>
</html>






